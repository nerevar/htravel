# Holidays travel roadmap:

### Большие задачи:
* кроны, которые скачивают дампы и сохраняют в базу, и парсеры которые парсят файлы из базы
* trip'ы — маршруты из разных городов
* дизайн, интерфейс
* покупка билетов, партнёрка

### РЖД:
- [x] json_dump parser с определением пути (way)
- [x] несколько городов
- [x] красивый список билетов в таблице по всем городам
- [x] билеты туда-обратно сразу в одном "трипе"

### Страницы сайта:
- главная `htravel.dev`
    - [x] подборка направлений на ближайшие выходные
    - [x] по каждому направлению туда-обратно 1-3 лучших поезда и ссылка на страницу города
    - [x] можно перейти на каждый город, или выбрать конкретные выходные
    - [ ] геолокация — определять город и предлагать билеты из "Москвы" по-умолчанию
        - [ ] сохранять в куку выбранный город
- страница города "Все билеты в Казань": `htravel.dev/trip/moscow/kazan`, `htravel.dev/trip/spb/tallin`
- страница конкретной даты "Билеты на выходные 14-15 апреля" `htravel.dev/dates/14.04.18?plus=1`
- страница просмотра билетов на конкретные даты "Билеты в Казань на выходные 14-15 апреля" `htravel.dev/trip/moscow/kazan/14.04.18?orderby=price`
    - [ ] показывать все билеты на конкретную дату в конкретный город
    - [ ] сортировки билетов: по "удобному времени", по цене, по итоговому score

### Сущность Trip
- [ ] целиком путешествия Trip "В Питер на выходные туда и обратно за 3150р!"
- [ ] сущность trip, содержащая 2 ways, одни и те же route могут использоваться в Trip MOW-SPB и SPB-MOW
- [ ] поддержка выездов не только из Москвы

### Базовое качество билетов
- ranking:
    - [x] ранжирование билетов по score
    - [x] ранжирование билетов "обратно"
    - [ ] фильтр по датам, +- 1-2 дня
    - [ ] учесть купе / сидячие
    - [ ] проходящий поезд или нет
    - [ ] исключить цены за инвалидные места
    - [ ] исключить с пересадками (?)
- features:
    - [ ] сквозные факторы по всем поездам в `город`: на эти выходные самые дешёвые билеты
    - [ ] показывать рядом с поездом — динамику количества оставшихся мест (Поторопись! скоро раскупят)
    - [ ] интеграция с погодой, загрузить по каждому городу+дате weather_score

### Скачивание расписания, robot:
- [x] уметь скачивать билеты по маршруту на заданную дату
- [x] отдельная сущность поездов, Train
- [x] отдельная сущность закачек, crawler скачивает json_dump, parser сохраняет в базу
- [ ] считать score при обновлении базы, а не в рантайме
- [ ] запуск по крону скачиваний

### Партнёрки, билеты
- [ ] партнёрка с РЖД / tutu / travelpayouts
    - [ ] формировать ссылки на покупку билетов конкретных поездов [tutu.ru](tutu.ru.md)
        - ссылка на tutu.ru, обернуть в "travelpayouts.com/click", обернуть в goo.gl
- [ ] формировать ссылки на РЖД на покупку конкретных поездов, конкретной даты, конкретного направления

### To Production
- [ ] нормальный дизайн забабахать
- [ ] добавить популярных направлений: https://support.travelpayouts.com/hc/ru/articles/115001440551

### Авиа:
- [ ] aviasales API
- [ ] skyskanner API
- [ ] Pobeda crawler
